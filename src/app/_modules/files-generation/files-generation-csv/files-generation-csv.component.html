<div align="center" style="padding-top:10px;">
  <h4>{{pageTitle}}</h4>
  <hr>
  <!-- PANEL BUSQUEDA / INICIO -->
  <form class="searchPanel" [formGroup]="rf_searchForm" (ngSubmit)="rf_onSubmit()">
    <!--BACKEND -->
    <div class="form-group" align="right" id="LangListDiv" >
      <label for="LangList">{{this.tituloListadoLenguajes}}</label>
      <select   id="LanguageList"
            name="LanguajeList"
            style="width:auto;"
            #_languajeList>
            <option *ngFor="let _languageName of __languajeList" 
                  [value]   ="_languageName._index"
                  [selected]="_languageName._selected">{{_languageName._value}}
            </option>
      </select>
    </div>
    <!--P_ROW_NUM-->
    <div class="form-group" align="right">
      <label for="_P_ROW_NUM">
        # de Registros :
      </label>
      <input id="_P_ROW_NUM" type="text" formControlName="_P_ROW_NUM">
    </div>
    <!--P_FECHA_INICIO-->
    <div class="form-group" align="right">
      <label for="_P_FECHA_INICIO">
        Fecha Inicial :
      </label>
      <input id="_P_FECHA_INICIO" type="date" formControlName="_P_FECHA_INICIO">
    </div>
    <!--P_FECHA_FIN-->
    <div class="form-group" align="right">
      <label for="_P_FECHA_FIN">
        Fecha Final :
      </label>
      <input id="_P_FECHA_FIN" type="date" formControlName="_P_FECHA_FIN">
    </div>
    <!-- INICIO BUTTONS PANEL        -->
    <div class="form-group" align="right" style="display: block;" >
      <button class="button" type="submit" [disabled]="(this.rf_buttonCaption != '[Buscar]')">{{this.rf_buttonCaption}}</button>
      |
      <button class="button" type="button" (click)="this.rf_newSearch()">[Nueva]</button>
      |
      <button class="button" type="button" (click)="SetCSVLink()" [disabled]="(this.rf_buttonCaption_csv != '[Generar CSV]')">{{this.rf_buttonCaption_csv}}</button>
     </div>
    <!-- FIN BUTTONS PANEL                     -->
    <!-- INICIO MENSAJES VALIDACION (REACTIVE) -->
    <div *ngIf="(this.rf_searchForm.invalid)" class="form-group" align="right">
      <ul class="alert alert-danger">
            <p>Favor revise los datos del formulario</p>
            <li *ngIf="((this.rf_searchForm.value['_P_ROW_NUM'] == null) ||  (this.rf_searchForm.value['_P_ROW_NUM'] == '') || (this.rf_searchForm.value['_P_ROW_NUM'] == '0'))" class="alert alert-danger">
              El campo '# de Registros' es requerido.
            </li>
            <li *ngIf="(((this.rf_searchForm.value['_P_FECHA_INICIO'] == null)  || (this.rf_searchForm.value['_P_FECHA_INICIO'] == '') ) )" class="alert alert-danger">
              El campo 'Fecha Inicial' es requerido.
            </li>
            <li *ngIf="(((this.rf_searchForm.value['_P_FECHA_FIN'] == null)     || (this.rf_searchForm.value['_P_FECHA_FIN'] == '') ) )" class="alert alert-danger">
              El campo 'Fecha Final ' es requerido.
            </li>
      </ul>
    </div>
    <!-- FIN MENSAJES DE VALIDACION (REACTIVE)-->
    <!-- INICIO STATUS BUSQUEDA      -->
    <div class="form-group" align="center">
      <span id="status" name="searchStatus" class="searchStatus" id="searchStatus">{{this.rf_textStatus}}</span>
    </div>
    <!-- FIN    / STATUS BUSQUEDA      -->
    <!-- INICIO / DESCARGA EXCEL       -->
    <!-- ENLACE DESCARGA / INICIO -->
    <div *ngIf="this.downloadLink"  class="form-group" align="right" style="display: block;" id="divdescargacsv" >
      <a [href]="this.downloadLink" id="DownloadFile" target="_blank">{{ this.downloadCaption }}</a>
    </div> 
    <!-- ENLACE DESCARGA / FIN    -->
    <!-- FIN / DESCARGA EXCEL          -->
  </form>
  <!-- PANEL BUSQUEDA / FIN            -->
  <hr>  
<!-- INICIO TABLA NGBOOTSTRAP / LOG -->
<!--
  [[{ "id_Column"     :"1",
      "nombreCompleto":"Pablo Alejandro P\u00E9rez Acosta",
      "profesionOficio":"T\u00E9cnico Sistemas",
      "ciudad":"USA"},
-->
<div align="center" style="padding-top:10px;">
  <table class="table table-striped">
    <thead>
      <tr>
        <th scope="col">#</th>
        <th scope="col" sortable="nombreCompleto"    (sort)="onSort($event)">[Nombre Completo]</th>
        <th scope="col" sortable="profesionOficio"   (sort)="onSort($event)">[Profesion Oficio]</th>
        <th scope="col" sortable="ciudad"            (sort)="onSort($event)">[Ciudad]</th>
      </tr>
    </thead>
    <tbody>
      @for (personEntity of this.jsondata; track personEntity.id_Column ){
        <tr>
          <th scope="row">{{ personEntity.id_Column }}</th>
          <td><ngb-highlight [result]="personEntity.nombreCompleto"  [term]="service.searchTerm" /></td>
          <td><ngb-highlight [result]="personEntity.profesionOficio" [term]="service.searchTerm" /></td>
          <td><ngb-highlight [result]="personEntity.ciudad"          [term]="service.searchTerm" /></td>
        </tr>
      } @empty {
        <tr>
          <td colspan="4" style="text-align: center">[NO SE ENCONTRARON REGISTROS]</td>
        </tr>
      }
      <!--
      @for (country of countries | async; track country.id) {
        <tr>
          <th scope="row">{{ country.id }}</th>
          <td>
            <img
              [src]="'https://upload.wikimedia.org/wikipedia/commons/' + country.flag"
              [alt]="'The flag of ' + country.name"
              class="me-2"
              style="width: 20px"
            />
            <ngb-highlight [result]="country.name" [term]="service.searchTerm" />
          </td>
          <td><ngb-highlight [result]="country.area | number" [term]="service.searchTerm" /></td>
          <td><ngb-highlight [result]="country.population | number" [term]="service.searchTerm" /></td>
        </tr>
      } @empty {
        <tr>
          <td colspan="4" style="text-align: center">No countries found</td>
        </tr>
      }
      -->
    </tbody>
  </table>
  <!-- INIICO PAGINACION  -->
  <div class="d-flex justify-content-between p-2">
    <ngb-pagination [collectionSize]="(total | async)!" [(page)]="service.page" [pageSize]="service.pageSize">
    </ngb-pagination>
    <select class="form-select" style="width: auto" name="pageSize" [(ngModel)]="service.pageSize">
      <option [ngValue]="2">2 items per page</option>
      <option [ngValue]="4">4 items per page</option>
      <option [ngValue]="6">6 items per page</option>
    </select>
  </div>
  <!-- FIN PAGINACION     -->
</div>  
<!-- FIN TABLA NGBOOTSTRAP / LOG  -->

<!-- INICIO TABLA NGBOOTSTRAP / COUNTRIES -->
<div align="center" style="padding-top:10px;">
  <form>
    <!-- INICIO PANEL DE BUSQUEDA -->
    <div class="mb-3 row">
      <label for="table-complete-search" class="col-xs-3 col-sm-auto col-form-label">Full text search:</label>
      <div class="col-xs-3 col-sm-auto">
        <input
          id="table-complete-search"
          type="text"
          class="form-control"
          name="searchTerm"
          [(ngModel)]="service.searchTerm"
        />
      </div>
      @if (service.loading | async) {
        <span class="col col-form-label">Loading...</span>
      }
    </div>
    <!-- FIN PANEL DE BUSQUEDA    -->
    <hr>
    <table class="table table-striped">
      <thead>
        <tr>
          <th scope="col">#</th>
          <th scope="col" sortable="name"       (sort)="onSort($event)">Country</th>
          <th scope="col" sortable="area"       (sort)="onSort($event)">Area</th>
          <th scope="col" sortable="population" (sort)="onSort($event)">Population</th>
        </tr>
      </thead>
      <tbody>
        @for (country of countries | async; track country.id) {
          <tr>
            <th scope="row">{{ country.id }}</th>
            <td>
              <img
                [src]="'https://upload.wikimedia.org/wikipedia/commons/' + country.flag"
                [alt]="'The flag of ' + country.name"
                class="me-2"
                style="width: 20px"
              />
              <ngb-highlight [result]="country.name" [term]="service.searchTerm" />
            </td>
            <td><ngb-highlight [result]="country.area | number" [term]="service.searchTerm" /></td>
            <td><ngb-highlight [result]="country.population | number" [term]="service.searchTerm" /></td>
          </tr>
        } @empty {
          <tr>
            <td colspan="4" style="text-align: center">No countries found</td>
          </tr>
        }
      </tbody>
    </table>
    <hr>
    <!-- INIICO PAGINACION  -->
    <div class="d-flex justify-content-between p-2">
      <ngb-pagination [collectionSize]="(total | async)!" [(page)]="service.page" [pageSize]="service.pageSize">
      </ngb-pagination>
      <select class="form-select" style="width: auto" name="pageSize" [(ngModel)]="service.pageSize">
        <option [ngValue]="2">2 items per page</option>
        <option [ngValue]="4">4 items per page</option>
        <option [ngValue]="6">6 items per page</option>
      </select>
    </div>
    <!-- FIN PAGINACION     -->
  </form>
</div>
<!-- FIN TABLA NGBOOTSTRAP    -->
<hr>
<div align="right"><a routerLink="/FilesGenerationWeb">[Volver al Men√∫]</a></div>